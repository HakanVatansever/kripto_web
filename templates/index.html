<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Kripto Takip UygulamasÄ±</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

    <!-- Tema deÄŸiÅŸtirme butonu -->
    <button class="theme-toggle" onclick="toggleTheme()">ðŸŒ“Tema DeÄŸiÅŸtir</button>

    <!-- Arka planda dolanan coin simgeleri -->
    <div class="floating-icons">
        <img src="https://assets.coingecko.com/coins/images/1/thumb/bitcoin.png" style="top: 80%; left: 10%;">
        <img src="https://assets.coingecko.com/coins/images/279/thumb/ethereum.png" style="top: 90%; left: 30%;">
        <img src="https://assets.coingecko.com/coins/images/825/thumb/binance-coin-logo.png" style="top: 95%; left: 70%;">
        <img src="https://assets.coingecko.com/coins/images/6319/thumb/USD_Coin_icon.png" style="top: 85%; left: 50%;">
    </div>

    <!-- Kayan coin baÅŸlÄ±ÄŸÄ± -->
    <div class="coin-marquee">
        <div class="coin-track">
            {% for coin in favorites %}
                <div class="coin-item">
                    <img src="{{ get_coin_logo(coin) }}" alt="{{ coin }}">
                    {{ coin.upper() }}
                </div>
            {% endfor %}
        </div>
    </div>

    <h1>Kripto Para Takip UygulamasÄ±</h1>

    <form method="post">
        <label for="coin_id">Coin SeÃ§in:</label><br>
        <select name="coin_id" required>
            {% for coin in coin_list %}
                <option value="{{ coin.id }}"
                {% if coin.id == coin %}selected{% endif %}
                >{{ coin.name }} ({{ coin.symbol.upper() }})</option>
            {% endfor %}
        </select><br>

        <label for="currency">Para Birimi:</label><br>
        <select name="currency">
            <option value="usd">USD</option>
            <option value="eur">EUR</option>
            <option value="try">TRY</option>
        </select><br>

        <label for="days">Veri AralÄ±ÄŸÄ±:</label><br>
        <select name="days">
            <option value="1">1 GÃ¼n</option>
            <option value="7" selected>7 GÃ¼n</option>
            <option value="30">30 GÃ¼n</option>
        </select><br>

        <label for="chart_style">Grafik TÃ¼rÃ¼:</label><br>
        <select name="chart_style">
            <option value="line">Ã‡izgi</option>
            <option value="bar">Bar</option>
            <option value="area">Alan</option>
            <option value="scatter">Nokta</option>
        </select><br>

        <button type="submit">Fiyat GÃ¶ster</button>
        <button name="add_fav" value="1">Favorilere Ekle</button><br><br>

        <label for="alarm_price">Alarm FiyatÄ±:</label>
        <input type="text" name="alarm_price" placeholder="Ã–rn: 50000">
        <button name="set_alarm" value="1">Alarm Kur</button>
    </form>

    {% if error %}
        <p style="color:red;">{{ error }}</p>
    {% endif %}

    {% if coin and price %}
        <h2>{{ coin.upper() }} - {{ price }} {{ request.form.currency.upper() }}</h2>
        {% if logo_url %}
            <img src="{{ logo_url }}" alt="{{ coin }}" width="64">
        {% endif %}
    {% endif %}

    {% if chart %}
        <img src="data:image/png;base64,{{ chart }}" alt="Grafik">
    {% endif %}

    {% if favorites %}
        <h3>Favori Coinler</h3>
        <ul>
            {% for fav in favorites %}
                <li>{{ fav.upper() }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    {% if alarm_set %}
        <p style="color:green;">Alarm baÅŸarÄ±yla kuruldu!</p>
    {% endif %}

    <footer>
        <p>Â© 2025 Kripto Takip UygulamasÄ±</p>
    </footer>

    <script>
        function toggleTheme() {
            const body = document.body;
            body.classList.toggle('dark-theme');
            body.classList.toggle('light-theme');
            localStorage.setItem('theme', body.classList.contains('dark-theme') ? 'dark' : 'light');
        }

        window.onload = () => {
            const theme = localStorage.getItem('theme') || 'light';
            document.body.classList.add(theme + '-theme');
        };
    </script>
</body>
</html>
